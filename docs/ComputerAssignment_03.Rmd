---
title: "Computer Assignment 3: Describing Distributions with Numbers"
author: "Yuriy Davydenko"
date:  '`r format(Sys.Date(), "%B %d %Y")`'
output: html_document
---

<br>

    ## BEFORE STARTING, TYPE YOUR NAME INTO THE FIELD "author" ABOVE AND REMOVE THIS COMMENT ##

<br>

Download the datasets for this class:

* [Dataset (click "Save As")](docs/OPM94.RData)

You can download this whole script as `ComputerAssignment_03.Rmd` file to save on your computer and open in RStudio instead of copying & pasting from this webpage:

* [Complete Assignment #3: Download link - Rmd file - (Click "Save As")](docs/ComputerAssignment_03.Rmd)


For those who prefers to work with RCloud, a project with the same materials can be accessed using the following link:

* [RCloud Project](https://rstudio.cloud/project/914127)


<br>


## Load  Libraries, Set Your Working Directory, & Load Data

Load Libraries:
```{r, message=FALSE}
library(dplyr)         # for manipulating data
library(ggplot2)       # for making graphs
library(knitr)         # for nicer table formatting
library(summarytools)  # for frequency distribution tables
```

Set your working directory, where the folder "Datasets" is located:
```{r}
setwd(".")             # for example: setwd("C:/Users/George/Dropbox/GSU/4041_Spring2020/R")
```

## Load Data
We are going to work with a new data set - a random sample of 1,000 federal personnel records for March 1994. These are not the responses to questionnaires as the previous data set was. Instead, they include the sort of information the government keeps in its personnel files: grade, salary, occupation, supervisory status, education, age, years of federal experience, sex, race, etc.

```{r}
load("Datasets/OPM94.RData")
```

See a full listing of the variables by using `names(dataset_name)` command:
```{r}

```


## Homework Problems

### 1. Calculating the mode, median, mean, range, variance, and standard deviation

__1.1__ First, lets work temporarily with American Indian females only (this step will subset the data set): `race == "American Indian", male == "female"`

```{r}
opm94AIF <- opm94 %>% filter(race == "American Indian", male == "female")   # subset data
opm94AIF %>% pander::pander(split.table = Inf)                                # print the resulting dataset nicely formatted
```

Let's print out the individual values of the variables `age, edyrs, grade, promo01, supmgr01` in the subset of the data, so that you could calculate statistics manually. We'll also have the computer calculate the same statistics so that you could check your answers.

Individual values:
```{r}
opm94AIF <- opm94AIF %>% select("age", "edyrs", "grade", "promo01", "supmgr01")
opm94AIF
```

Descriptive statistics for the same variables (three different commands/packages to choose from):

Using `summary()` from `base` package:
```{r}
opm94AIF %>% select("age", "edyrs", "grade", "promo01", "supmgr01") %>% summary()
```

Using `descr()` from `descr` package:
```{r}
descr::descr(opm94AIF)
```

Using `descr()` from `summarytools` package:
```{r}
summarytools::descr(opm94AIF)
```

<br>

__QUESTION 1.1:__ Which of the three outputs for descriptive statistics do you find the most useful? Explain

    Replace this note with your answer. Make sure it remains indented.
    

<br>

__1.2__ Using the raw data above, let's compute (as appropriate) the mode, median, mean, range, variance, and standard deviation  for variable `age` (`opm94AIF$age`: 42 31 46 53 57 62 33 43 53 32 ) listed for American Indian females:

```{r}
age <- opm94AIF$age  # save the values in a new variable with the name `age` for less typing
```

* Mode age
```{r}
table(c(42, 31, 46, 53, 57, 62, 33, 43, 53, 32))    # figure out the mode from the table or use which.max()
which.max(table(c(42, 31, 46, 53, 57, 62, 33, 43, 53, 32)))
```

* Median age
```{r}
sort(c(42, 31, 46, 53, 57, 62, 33, 43, 53, 32)) # find the median from the ordered vector or use R function median()
median(opm94AIF$age)
```

* Mean age:
```{r}
(42+31+46+53+57+62+33+43+53+32)/10        # or
sum(opm94AIF$age)/length(opm94AIF$age)
mean(opm94AIF$age)
```

* Range for age:
```{r}
sort(c(42, 31, 46, 53, 57, 62, 33, 43, 53, 32))   # or
range(opm94AIF$age)

```

* Variance = SSD/(n-1)  
```{r}
age
age - mean(age)
(age - mean(age))^2
sum((age - mean(age))^2)/(10-1) 
var(age)
```

* SD = sqrt(var)
```{r}
sqrt(sum((age - mean(age))^2)/(10-1) )
sd(age)
```

__QUESTION 1.2:__ Do the manually calcualted results match the descriptive statistics in the tables above in section 1.1?

    Replace this note with your answer. Make sure it remains indented.

<br>

__QUESTION 1.3:__ Similarly, compute (as appropriate) the mode, median, mean, range, variance, and standard deviation  for variables `edyrs` and `supmgr01` (`opm94AIF$edyrs`: 13 13 12 15 12 10 13 18 15 13, `opm94AIF$supmgr01`: 1 0 0 1 0 0 0 0 0 0 ) listed for American Indian females. Check your results against the output in 1.1.

```{r}

# replace this note with your computations and comments

```

<br>

### 2. Calculating mode, median, mean for grouped data

Let's generate grouped data (frequency table) that you will use for calculating statistics (mode, median, mean) for variable `edyrs` from the full dataset `opm94`:

```{r}
summarytools::freq(opm94$edyrs)   # grouped data
summary(opm94$edyrs)  # summary statistics by R

```

<br>
Finding mode, median, mean for `edyrs` using the grouped data:

* Mode - the most frequent vaue, can be seen in the frequency table (=12)

* Median - the value in the middle, can be seen in the frequency table from the `% Valid Cum.` column (=14)

* Mean:  SUM(Xi*fi)/n:
```{r}
(10*12 + 12*330 + 13*101 + 14*98 + 15*39 + 16*290 + 18*112 + 20*18)/1000
```

__QUESTION 2.1:__ Similarlly to the example above, find the mode, median, mean for variables `yos` and `supmgr01` using the grouped data:


```{r}

# your work

```




<br>

### 3. Calculating mode, median, mean for grouped data (dummy variables)

__QUESTION 3:__
`Male01` and `exit01` are dummy variables. (They only have two possible values, o and 1.) For each, compare its mean to the percentage of cases with the value 1. How are these two measures related?

Percentage of cases with the value 0 and 1 for `male01`:
```{r}
table(opm94$male01) %>% prop.table()*100  
```

Mean value of `male01`:
```{r}
mean(opm94$male01)   
```

    Your answer


<br>

### 4. Calcualting the mean for grouped data formulas for intervals

__QUESTION 4:__
Using the Frequencies output for the entire data set (and the grouped data formulas for intervals), calculate the mean grade, using GRADE4 instead of grade.Calculate means using the midpoint of each interval of grade4

```{r}
freq(opm94$grade4)
```

Mean:
```{r}
# your work
```


<br>


### 5. Comparing means for different groups

Let's calculate mmeans of a variety of variables for black and white workers so that you can describe differences between the two groups of workers:

```{r}
opm94$race %>% table()
opm94 %>% filter(race == "White") %>% select(sal) %>% summarise(mean_sal_white = mean(sal, na.rm = T))
opm94 %>% filter(race == "Black") %>% select(sal) %>% summarise(mean_sal_black = mean(sal, na.rm = T))
opm94 %>% filter(race == "White") %>% select(edyrs) %>% summarise(mean_edyrs_white = mean(edyrs, na.rm = T))
opm94 %>% filter(race == "Black") %>% select(edyrs) %>% summarise(mean_edyrs_black = mean(edyrs, na.rm = T))
```


Or, alternatively, use the following commands:
```{r}
opm94 %>% select(race, sal) %>% group_by(race) %>% summarise(mean_sal = mean(sal, na.rm = T))
opm94 %>% select(race, edyrs) %>% group_by(race) %>% summarise(mean_edyrs = mean(edyrs, na.rm = T))
#opm94 %>% select(race, grade) %>% group_by(race) %>% summarise(mean_grade = mean(grade, na.rm = T))
#opm94 %>% select(race, promo01) %>% group_by(race) %>%  summarise(mean_promo01 = mean(promo01, na.rm = T))
#opm94 %>% select(race, supmgr01) %>% group_by(race) %>%  summarise(mean_supmgr01 = mean(supmgr01, na.rm = T))
```




__Question 5:__
Do whites receive higher rewards (e.g., salaries, grades, supervisory status, promotions) than minorities? Do differences in education and federal experience seem to be partly responsible for these patterns? Write a paragraph discussing differences between the groups (be specific about which groups you compare). 

    Your answer...
    

***

__Knit the document into an html file and upload to RPubs or save as a pdf file and submit on iCollege.__


***




